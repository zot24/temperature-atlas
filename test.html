<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Map Test</title>
    <link href="vendor/maplibre-gl.css" rel="stylesheet"
        onerror="this.onerror=null;this.href='https://cdn.jsdelivr.net/npm/maplibre-gl@4.1.2/dist/maplibre-gl.css';" />
    <script src="vendor/maplibre-gl.js"
        onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/maplibre-gl@4.1.2/dist/maplibre-gl.js';"></script>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
        }

        #map {
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        if (!window.maplibregl) {
            document.body.innerHTML = '<pre style="padding:16px;font-family:monospace">MapLibre failed to load (maplibregl missing). Check vendor/maplibre-gl.js or your network.</pre>';
        } else {
            const CARTO_RASTER_STYLE = {
                version: 8,
                sources: {
                    'carto-raster': {
                        type: 'raster',
                        tiles: [
                            'https://a.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',
                            'https://b.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',
                            'https://c.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png',
                            'https://d.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}.png'
                        ],
                        tileSize: 256,
                        attribution: '© OpenStreetMap contributors, © CARTO'
                    }
                },
                layers: [{ id: 'carto-raster', type: 'raster', source: 'carto-raster' }]
            };

            const map = new maplibregl.Map({
                container: 'map',
                style: CARTO_RASTER_STYLE,
                center: [0, 20],
                zoom: 2,
                dragRotate: false,
                pitchWithRotate: false
            });
            map.on('load', () => console.log('Map loaded!'));
            map.on('error', (e) => console.error('Map error:', e));
        }
    </script>
</body>

</html>